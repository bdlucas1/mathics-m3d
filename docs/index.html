<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Panel Application</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <link rel="stylesheet" href="https://cdn.holoviz.org/panel/1.8.3/dist/bundled/plotlyplot/maplibre-gl@4.4.1/dist/maplibre-gl.css" type="text/css" />
    <style>
        body {
    max-width: 600px;
}

.m-app {
    gap: 1.5em;
}

.bk-TablerIcon {
    font-size: 20px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;
}

body {
    margin: 1.5em;
    /*width: 35em;*/
}

.m-top {
    width: 100%;
    height: 100%;
}

.m-button-row, .m-button-column {
    gap: 0.5em;
}


.m-pair {

    /*
    --border-color: #dddddd;

    border-left: 1px solid var(--border-color);
    border-top: 1px solid var(--border-color);
    padding-left: 1em;
    padding-top: 1em;
    */
    
    position: relative; /* anchor for .m-number */
    overflow: visible;  /* allow .m-number to spill out */

    gap: 1em;
    
    width: 100%;
}

.m-input {
    width: min-content;
    gap: 1em;
}

textarea.bk-input {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    height: fit-content !important;
    white-space: pre;
    resize: vertical;
    overflow: visible;
    font: inherit;
    width: 100vw;
    background: #f8f8f8;
}

.bk-Tooltip {
    font: 8pt sans-serif;
    white-space: pre;
    padding: 4px;
    line-height: 10pt;
    box-shadow: 5px 5px 10px lightgrey;
}

.m-number {
    position: absolute;
    top: 0;
    right: 0;
    transform: translate(50%, -50%);
    z-index: 1;

    padding-left: 0.5em;
    padding-right: 0.5em;
    color: #888888;
    font: 10pt sans-serif;
    background-color: white;
    border: 1px solid var(--border-color);
    border-radius: 9999px;
}

.m-sliders {
    
    overflow: visible;

    grid-template-columns: max-content 1fr 3em;
    column-gap: 0.5rem;
    row-gap: 0.25rem;
    align-items: center;
    margin-top: 1.5rem;

    /* slider label and value readout */
    /* TODO: does nothing */
    * {
        white-space: nowrap;
        font: 11pt sans-serif;
    }

    /*
    --slider-track-color: #cccccc;
    --slider-handle-width: 12px;
    --slider-handle-height: 24px;
    --slider-handle-radius: 4px;
    --slider-handle-border: 1px solid #999999;
    */
}

.m-manipulate {

    width: min-content;
    background-color: #f8f8f8;
    border: 1px solid #cccccc;
    border-radius: 3px;
    padding: 12px;
    padding-bottom: 20px;

    /* target of manipulate */
    & > :first-child {
        padding: 0.5em;
        background-color: white;
        border: 1px solid #cccccc;
        border-radius: 3px;

    }
}

.m-plot {
    width: min-content;
}


.m-row, .m-grid {

    /* stupid css trick to make the baseline of a plot in a row be its vertical center
       so that it is centered vertically relative to other content.
       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */
    & > .m-plot {
        transform: translateY(-50%);
    }
    & > .m-plot::before {
        display: inline-block;
        content: "";
        width: 0;
        height: 50%; /* baseline = bottom of this inline-block */
    }

    align-items: baseline;
}

.m-grid {
    /* TODO: demo hack - should be controlled by user,
       and everybody should stick to their boxes, but
       that's not currently the case. */
    grid-row-gap: 1em;
    grid-column-gap: 1em;
}

.m-row {
    display: flex;
    flex-direction: row;
    width: max-content;
}

.m-grid {

    display: grid;
    justify-items: center;
    width: max-content;

    > * {
        /* rows and columns as assigned when elements were generated by layout */
        grid-column: var(--col);
        grid-row: var(--row);
    }
}




    </style>

<link rel="stylesheet" href="https://pyscript.net/releases/2025.8.1/core.css" />
<link rel="stylesheet" href="https://cdn.holoviz.org/panel/1.8.3/dist/css/pyscript.css" />
<style type="text/css">.py-error { display: none; }</style>
<link rel="stylesheet" href="https://cdn.holoviz.org/panel/1.8.3/dist/css/loading.css" type="text/css" />
<style type="text/css">

:host(.pn-loading):before, .pn-loading:before {
  background-color: #c3c3c3;
  mask-size: auto calc(min(50%, 300px));
  -webkit-mask-size: auto calc(min(50%, 300px));
}
</style><script type="module" src="https://pyscript.net/releases/2025.8.1/core.js" defer></script>
<script type="esms-options">{"shimMode": true}</script>

<script type="text/javascript" src="https://cdn.holoviz.org/panel/1.8.3/dist/bundled/reactiveesm/es-module-shims@^1.10.0/dist/es-module-shims.min.js"></script>
<script type="text/javascript" src="https://cdn.holoviz.org/panel/1.8.3/dist/bundled/plotlyplot/plotly-3.1.0.min.js"></script>
<script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.8.1.min.js"></script>
<script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.8.1.min.js"></script>
<script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.8.1.min.js"></script>
<script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.8.1.min.js"></script>
<script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.8.1.min.js"></script>
<script type="text/javascript" src="https://cdn.holoviz.org/panel/1.8.3/dist/panel.min.js"></script>

<script type="text/javascript">
  Bokeh.set_log_level("info");
</script>  </head>
  <body class="pn-loading pn-arc">
    <div id="e3e92f9e-0f90-40c6-be5d-a118bdf9e3d3" data-root-id="p1011" style="display: contents;"></div>
  <div id="bbb6e684-3b30-49b4-89e7-cbdc872bad46" data-root-id="p1027" style="display: contents;"></div>
  <div id="bd69c9d3-60eb-4164-ac60-b436300d6560" data-root-id="p1028" style="display: contents;"></div>
  <script type='py' config='{"packages": ["https://cdn.holoviz.org/panel/wheels/bokeh-3.8.1-py3-none-any.whl", "https://cdn.holoviz.org/panel/1.8.3/dist/wheels/panel-1.8.3-py3-none-any.whl", "pyodide-http", "mathics3-9.0.1.dev0-py3-none-any.whl", "param", "plotly", "opencv-python", "pyyaml", "xyzservices", "frozendict", "jinja2", "pyviz_comms", "mpmath", "sympy", "anywidget", "mathics-scanner", "requests", "pandas", "pint", "pympler", "palettable", "Markdown"], "plugins": ["!error"], "files": {"m3d.resources.zip": "./*"}}'>
    import asyncio

    from panel.io.pyodide import init_doc, write_doc

    init_doc()

    import sys
    sys.stdout.flush()

    import os
    os.environ["DEMO_USE"] = "panel"
    os.environ["MATHICS3_TIMING"] = "-1"

    import threading
    import re

    import panel as pn
    import panel.widgets as pnw
    import plotly.express as px
    import plotly.graph_objects as go
    import param

    import core
    import sym
    import layout as lt
    import os
    import util
    import hook
    import sys
    import time
    import ui

    pn.extension('plotly')
    pn.extension('mathjax')
    pn.extension(raw_css=[open('m3d.css').read()])

    class FE:
        def __init__(self):
            self.session = core.MathicsSession()
            pass

    fe = FE()


    #
    # An input-output pair, as a column
    #

    class Pair(pn.Column):

        def __init__(self, text=None):
            
            self.old_expr = ""

            # input
            instructions = "Type expression followed by shift-enter"
            self.input = pn.widgets.TextAreaInput(
                placeholder = instructions,
                value = text,
                value_input = text,
                auto_grow = True,
                max_rows = 9999,
                sizing_mode = "stretch_width",
                css_classes = ["m-input"],
                # TODO: alwyas initially not visible?
                visible = False,
            )

            # track as user types
            def input_changed(event):
                self.is_stale = self.old_expr != self.input.value_input
                self.exec_button.visible = self.is_stale
            self.input.param.watch(input_changed, "value_input")

            # edit button toggles input code block visibility
            def toggle_input():
                self.input.visible = not self.input.visible
            self.edit_button = ui.icon_button(
                "edit",
                "Toggle code block\nfor editing",
                toggle_input
            )

            # execute code if stale
            self.exec_button = ui.icon_button(
                "alert-triangle",
                "Output is stale; click or\ntype cmd+enter\nto execute code", 
                self.update_if_changed
            )
            self.exec_button.visible = False

            # put the buttons together
            buttons = pn.Column(
                self.edit_button,
                self.exec_button,
                css_classes = ["m-button-column"]
            )

            # output
            self.output = pn.Row(
                None, # actual output goes here
                buttons,
                css_classes = ["m-output"],
                # TODO: extract from .css file?
                styles=dict(width="fit-content", gap="1em")
            )

            # make us a column consisting of the input followed by the output
            # input may be invisible if not in edit mode
            super().__init__(self.input, self.output, css_classes=["m-pair"])

            # initial content
            self.update_if_changed(force=True)

        # check whether input has changed, and eval if so
        def update_if_changed(self, force=False):
            expr = self.input.value_input
            if expr and (force or self.is_stale):
                with util.Timer("execute code block"):
                    expr = fe.session.parse(expr)
                    expr = expr.evaluate(fe.session.evaluation)
                    layout = lt.expression_to_layout(fe, expr)
                    self[1][0] = layout
                self.old_expr = expr
                self.is_stale = False
                self.exec_button.visible = False
                
                    
    #
    # cmd+enter executes all changed
    #

    def update_changed(force=False):
        for item in the_app:
            if isinstance(item, Pair):
                item.update_if_changed(force=force)

    shortcuts = ui.KeyboardShortcuts(shortcuts=[
        ui.KeyboardShortcut(name="run", key="Enter", ctrlKey=True),
        ui.KeyboardShortcut(name="run", key="Enter", altKey=True),
        ui.KeyboardShortcut(name="run", key="Enter", metaKey=True),
        ui.KeyboardShortcut(name="run_force", key="Enter", ctrlKey=True, shiftKey=True),
        ui.KeyboardShortcut(name="run_force", key="Enter", altKey=True, shiftKey=True),
        ui.KeyboardShortcut(name="run_force", key="Enter", metaKey=True, shiftKey=True),
    ])

    def shortcut_msg(event):
        if event.data == "run":
            update_changed()
        if event.data == "run_force":
            update_changed(force=True)
    shortcuts.on_msg(shortcut_msg)

    #
    # function to construct the app
    # we pass this to pn.serve so it can construct
    # the app when it's good and ready (see comment below)
    #

    # TODO: any benefit to this being a class?
    def create_app(load):

        buttons = pn.Row(
            pn.widgets.ButtonIcon(icon="help"),
            pn.widgets.ButtonIcon(icon="file-plus"),
            pn.widgets.ButtonIcon(icon="file-download"),
            pn.widgets.ButtonIcon(icon="file-upload"),
            pn.widgets.ButtonIcon(icon="edit"),
            pn.widgets.ButtonIcon(icon="player-play"),
            pn.widgets.ButtonIcon(icon="clipboard-text"),
            #pn.widgets.ButtonIcon(icon="mood-smile"),
            #pn.widgets.ButtonIcon(icon="mood-confuzed"),
            #pn.widgets.ButtonIcon(icon="alert-triangle"),
            #pn.widgets.ButtonIcon(icon="square-x"),
            #pn.widgets.ButtonIcon(icon="heart"),
            #pn.widgets.ButtonIcon(icon="file-pencil"),    
            #pn.widgets.ButtonIcon(icon="player-track-next"),
            css_classes=["m-button-row"]
        )

        app = pn.Column(
            shortcuts,
            buttons,
            css_classes=["m-app"]
        )

        if load:
            md_fn = sys.argv[1] if len(sys.argv) > 1 else "data/gallery.m3d"
            print("loading", md_fn)
            md_str = open(md_fn).read()
            # TODO: allow for tags or instructions after ``` until end of line
            md_parts = re.split("(```)", md_str)
            is_m3 = False
            for part in md_parts:
                if part == "```":
                    is_m3 = not is_m3
                elif is_m3:
                    pair = Pair(part.strip())
                    app.append(pair)
                    # TODO: autorun optional?
                    pair.update_if_changed(force=True)
                else:
                    #help(pn.pane.Markdown)
                    md = pn.pane.Markdown(
                        part,
                        disable_math = False,
                        css_classes=["m-markdown"],
                        # TODO: extract from .css file
                        stylesheets=["""
                            * {
                                font-family: sans-serif;
                                font-size: 12pt;
                                line-height: 1.4;
                            }
                            h1 {font-size: 20pt; margin-top: 1.0em; &:first-child {margin-top: 0em;}}
                            h2 {font-size: 18pt; margin-top: 0.8em; &:first-child {margin-top: 0em;}}
                            h3 {font-size: 16pt; margin-top: 0.6em; &:first-child {margin-top: 0em;}}
                            h4 {font-size: 24pt; margin-top: 0.4em; &:first-child {margin-top: 0em;}}
                        """]
                    )
                    app.append(md)

        global the_app
        the_app = app
        return app

    #
    # startup action depends on mode -
    # building for pyodide, running under pyodide, or running as a server
    #

    if "DEMO_BUILD_PYODIDE" in os.environ:
        print("building for pyodide")
        app = create_app(load=False)
        app.servable()
    elif "pyodide" in sys.modules:
        print("running under pyodide")
        app = create_app(load=True)
        app.servable()
    else:
        print("running as local server")
        # we need to pass a function to create the app instead of
        # passing an already created app because the timer used in manipulate
        # requires that the server already be running
        pn.serve(
            lambda: create_app(load=True),
            port=9999,
            address="localhost",
            threaded=True,
            show=False
        )
        #time.sleep(1)
        util.Browser().show("http://localhost:9999").start()


    asyncio.ensure_future(write_doc());</script>
    <script type="application/json" id="p1029">
      {"3c82e404-a291-4edb-8f28-468e51d68364":{"version":"3.8.1","title":"Panel Application","config":{"type":"object","name":"DocumentConfig","id":"p1009","attributes":{"reconnect_session":false,"notify_connection_status":false,"notifications":null}},"roots":[{"type":"object","name":"panel.models.layout.Column","id":"p1011","attributes":{"name":"Column00127","css_classes":["m-app"],"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"type":"object","name":"ImportedStyleSheet","id":"p1014","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.3/dist/css/loading.css"}},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"type":"object","name":"ImportedStyleSheet","id":"p1026","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.3/dist/css/listpanel.css"}},{"type":"object","name":"ImportedStyleSheet","id":"p1012","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.3/dist/bundled/theme/default.css"}},{"type":"object","name":"ImportedStyleSheet","id":"p1013","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.3/dist/bundled/theme/native.css"}}],"margin":0,"align":"start","children":[{"type":"object","name":"panel.models.esm.ReactComponent","id":"p1016","attributes":{"name":"KeyboardShortcuts","subscribed_events":{"type":"set","entries":["dom_event","data_event"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1012"},{"id":"p1013"}],"margin":0,"align":"start","class_name":"KeyboardShortcuts","data":{"type":"object","name":"KeyboardShortcuts1","id":"p1015","attributes":{"name":"KeyboardShortcuts00118","tags":["__ref:p1011"],"shortcuts":[{"type":"map","entries":[["name","run"],["key","Enter"],["ctrlKey",true]]},{"type":"map","entries":[["name","run"],["key","Enter"],["altKey",true]]},{"type":"map","entries":[["name","run"],["key","Enter"],["metaKey",true]]},{"type":"map","entries":[["name","run_force"],["key","Enter"],["ctrlKey",true],["shiftKey",true]]},{"type":"map","entries":[["name","run_force"],["key","Enter"],["altKey",true],["shiftKey",true]]},{"type":"map","entries":[["name","run_force"],["key","Enter"],["metaKey",true],["shiftKey",true]]}]}},"esm":"\n// Hash a shortcut into a string for use in a dictionary key (booleans / null / undefined are coerced into 1 or 0)\nfunction hashShortcut({ key, altKey, ctrlKey, metaKey, shiftKey }) {\n  return `${key}.${+!!altKey}.${+!!ctrlKey}.${+!!metaKey}.${+!!shiftKey}`;\n}\n\nexport function render({ model }) {\n  const [shortcuts] = model.useState(\"shortcuts\");\n\n  const keyedShortcuts = {};\n  for (const shortcut of shortcuts) {\n    keyedShortcuts[hashShortcut(shortcut)] = shortcut.name;\n  }\n\n  function onKeyDown(e) {\n    const name = keyedShortcuts[hashShortcut(e)];\n    //console.log(e, name)\n    if (name) {\n      e.preventDefault();\n      e.stopPropagation();\n      model.send_msg(name);\n      return;\n    }\n  }\n\n  /* bdl: I added capture:true */\n  React.useEffect(() =&gt; {\n    window.addEventListener('keydown', onKeyDown, {capture: true});\n    return () =&gt; {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  });\n\n  return &lt;&gt;&lt;/&gt;;\n}\n","importmap":{"type":"map","entries":[["imports",{"type":"map","entries":[["react","https://esm.sh/react@18.3.1"],["react/","https://esm.sh/react@18.3.1/"],["react-dom","https://esm.sh/react-dom@18.3.1?deps=react@18.3.1&amp;external=react"],["react-dom/","https://esm.sh/react-dom@18.3.1&amp;deps=react@18.3.1&amp;external=react/"]]}],["scopes",{"type":"map"}]]}}},{"type":"object","name":"Row","id":"p1017","attributes":{"name":"Row00126","css_classes":["m-button-row"],"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1026"},{"id":"p1012"},{"id":"p1013"}],"margin":0,"align":"start","children":[{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1019","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"type":"object","name":"ImportedStyleSheet","id":"p1018","attributes":{"url":"https://cdn.holoviz.org/panel/1.8.3/dist/css/icon.css"}},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"help","active_icon":"check"}},{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1020","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1018"},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"file-plus","active_icon":"check"}},{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1021","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1018"},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"file-download","active_icon":"check"}},{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1022","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1018"},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"file-upload","active_icon":"check"}},{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1023","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1018"},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"edit","active_icon":"check"}},{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1024","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1018"},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"player-play","active_icon":"check"}},{"type":"object","name":"panel.models.icon.ButtonIcon","id":"p1025","attributes":{"subscribed_events":{"type":"set","entries":["button_click"]},"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 300px));\n  -webkit-mask-size: auto calc(min(50%, 300px));\n}",{"id":"p1014"},"body {\n    max-width: 600px;\n}\n\n.m-app {\n    gap: 1.5em;\n}\n\n.bk-TablerIcon {\n    font-size: 20px;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font: 10pt menlo, consolas, 'DejaVu Sans Mono', monospace;\n}\n\nbody {\n    margin: 1.5em;\n    /*width: 35em;*/\n}\n\n.m-top {\n    width: 100%;\n    height: 100%;\n}\n\n.m-button-row, .m-button-column {\n    gap: 0.5em;\n}\n\n\n.m-pair {\n\n    /*\n    --border-color: #dddddd;\n\n    border-left: 1px solid var(--border-color);\n    border-top: 1px solid var(--border-color);\n    padding-left: 1em;\n    padding-top: 1em;\n    */\n    \n    position: relative; /* anchor for .m-number */\n    overflow: visible;  /* allow .m-number to spill out */\n\n    gap: 1em;\n    \n    width: 100%;\n}\n\n.m-input {\n    width: min-content;\n    gap: 1em;\n}\n\ntextarea.bk-input {\n    border: none !important;\n    outline: none !important;\n    box-shadow: none !important;\n    height: fit-content !important;\n    white-space: pre;\n    resize: vertical;\n    overflow: visible;\n    font: inherit;\n    width: 100vw;\n    background: #f8f8f8;\n}\n\n.bk-Tooltip {\n    font: 8pt sans-serif;\n    white-space: pre;\n    padding: 4px;\n    line-height: 10pt;\n    box-shadow: 5px 5px 10px lightgrey;\n}\n\n.m-number {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(50%, -50%);\n    z-index: 1;\n\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    color: #888888;\n    font: 10pt sans-serif;\n    background-color: white;\n    border: 1px solid var(--border-color);\n    border-radius: 9999px;\n}\n\n.m-sliders {\n    \n    overflow: visible;\n\n    grid-template-columns: max-content 1fr 3em;\n    column-gap: 0.5rem;\n    row-gap: 0.25rem;\n    align-items: center;\n    margin-top: 1.5rem;\n\n    /* slider label and value readout */\n    /* TODO: does nothing */\n    * {\n        white-space: nowrap;\n        font: 11pt sans-serif;\n    }\n\n    /*\n    --slider-track-color: #cccccc;\n    --slider-handle-width: 12px;\n    --slider-handle-height: 24px;\n    --slider-handle-radius: 4px;\n    --slider-handle-border: 1px solid #999999;\n    */\n}\n\n.m-manipulate {\n\n    width: min-content;\n    background-color: #f8f8f8;\n    border: 1px solid #cccccc;\n    border-radius: 3px;\n    padding: 12px;\n    padding-bottom: 20px;\n\n    /* target of manipulate */\n    &amp; &gt; :first-child {\n        padding: 0.5em;\n        background-color: white;\n        border: 1px solid #cccccc;\n        border-radius: 3px;\n\n    }\n}\n\n.m-plot {\n    width: min-content;\n}\n\n\n.m-row, .m-grid {\n\n    /* stupid css trick to make the baseline of a plot in a row be its vertical center\n       so that it is centered vertically relative to other content.\n       TODO: the translate is ugly; look into whether there's a cleaner way to do this. */\n    &amp; &gt; .m-plot {\n        transform: translateY(-50%);\n    }\n    &amp; &gt; .m-plot::before {\n        display: inline-block;\n        content: \"\";\n        width: 0;\n        height: 50%; /* baseline = bottom of this inline-block */\n    }\n\n    align-items: baseline;\n}\n\n.m-grid {\n    /* TODO: demo hack - should be controlled by user,\n       and everybody should stick to their boxes, but\n       that's not currently the case. */\n    grid-row-gap: 1em;\n    grid-column-gap: 1em;\n}\n\n.m-row {\n    display: flex;\n    flex-direction: row;\n    width: max-content;\n}\n\n.m-grid {\n\n    display: grid;\n    justify-items: center;\n    width: max-content;\n\n    &gt; * {\n        /* rows and columns as assigned when elements were generated by layout */\n        grid-column: var(--col);\n        grid-row: var(--row);\n    }\n}\n\n\n\n",{"id":"p1018"},{"id":"p1012"},{"id":"p1013"}],"margin":[5,10],"align":"start","icon":"clipboard-text","active_icon":"check"}}]}}]}},{"type":"object","name":"panel.models.location.Location","id":"p1027","attributes":{"name":"location","reload":false}},{"type":"object","name":"panel.models.browser.BrowserInfo","id":"p1028","attributes":{"name":"browser_info"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"start","kind":"Any","default":0},{"name":"end","kind":"Any","default":100},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]},{"type":"model","name":"KeyboardShortcuts1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"shortcuts","kind":"Any","default":[]},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('p1029').textContent;
              const render_items = [{"docid":"3c82e404-a291-4edb-8f28-468e51d68364","roots":{"p1011":"e3e92f9e-0f90-40c6-be5d-a118bdf9e3d3","p1027":"bbb6e684-3b30-49b4-89e7-cbdc872bad46","p1028":"bd69c9d3-60eb-4164-ac60-b436300d6560"},"root_ids":["p1011","p1027","p1028"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
      else document.addEventListener("DOMContentLoaded", fn, {once: true});
      })();
    </script>
  </body>
</html>